<div class="container">
  <div class="row justify-content-center">
    <mat-card class="col-md-4">
      <div class="text-center">
        <img class="icon" alt="festus-icon" src="../assets/img/festus-icon.jpg">
      </div>

      <form [formGroup]="form" (ngSubmit)="signIn()">
        <mat-form-field
          class="w-100 pt-4 ps-4 pe-4"
          appearance="outline"
          color="accent"
        >
          <mat-label>Usuario</mat-label>

          <input
            matInput
            type="email"
            placeholder="Usuario o correo"
            formControlName="userName"
          >

          <mat-hint>
            Puedes usar tu nombre de usuario o correo electrónico
          </mat-hint>

          <mat-error *ngIf="form.get('userName').hasError('required')">
            <em class="mdi mdi-information"></em>
            El usuario es requerido
          </mat-error>

          <mat-error *ngIf="form.get('userName').getError('server')">
            <em class="mdi mdi-information"></em>
            {{ form.get('userName').getError('server') }}
          </mat-error>
        </mat-form-field>

        <mat-form-field
          class="w-100 pt-4 ps-4 pe-4"
          appearance="outline"
          color="accent"
        >
          <mat-label>Contraseña</mat-label>

          <input
            matInput
            placeholder="Contraseña"
            formControlName="password"
            [type]="hide ? 'password' : 'text'"
          >

          <button
            mat-icon-button
            matSuffix
            type="button"
            [disabled]="load"
            (click)="hide = !hide"
          >
            <mat-icon>{{ hide ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>

          <mat-hint>
            Por tu seguridad te recomendamos una contraseña compleja
          </mat-hint>

          <mat-error *ngIf="form.get('password').hasError('required')">
            <em class="mdi mdi-information"></em>
            La contraseña es requerida
          </mat-error>

          <mat-error *ngIf="form.get('password').getError('server')">
            <em class="mdi mdi-information"></em>
            {{ form.get('password').getError('server') }}
          </mat-error>
        </mat-form-field>

        <div class="text-center pt-4 pb-3">
          <div *ngIf="load" class="ps-5 pe-5">
            <mat-progress-bar mode="indeterminate" color="primary">
            </mat-progress-bar>
          </div>

          <button *ngIf="!load" mat-stroked-button color="primary">
            <em class="mdi mdi-account"></em>
            Iniciar sesión
          </button>
        </div>
      </form>

      <div class="legend">
        powered by Pechblenda
      </div>
    </mat-card>
  </div>
</div>
